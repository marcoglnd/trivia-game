(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{113:function(e,t,a){e.exports=a(217)},118:function(e,t,a){},123:function(e,t,a){},130:function(e,t){},132:function(e,t){},165:function(e,t){},166:function(e,t){},172:function(e,t){},209:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(45),i=a.n(c),s=(a(118),a(18)),o=a(12),l=(a(123),a(28)),u=a(47),m=a(5),d=a(6),p=a(8),h=a(7),b=a(4),f=a(9),g=a(108),y=a.n(g),v=function(e){return{type:"SET_BTN_HIDDEN",payload:e}},E=function(e){return{type:"SET_CLICKED",payload:e}},k=function(e){return{type:"SET_TIMER",payload:e}},O=function(e){return{type:"SET_SCORE",payload:e}},j=(a(209),a(48)),C=a.n(j),S=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:C.a,alt:"logo"}))}}]),t}(n.Component),N=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).state={email:"",name:""},e.handleChange=e.handleChange.bind(Object(b.a)(e)),e.getToken=e.getToken.bind(Object(b.a)(e)),e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getToken",value:function(){var e=this.props.history.push,t={player:{name:"",assertions:0,score:0,gravatarEmail:""}},a=this.props,n=a.setAvatar,r=a.setName,c=a.setScore,i=this.state,s=i.email,o=i.name;t.player.name=o,t.player.gravatarEmail=s;var l=y()(s).toString();n("https://www.gravatar.com/avatar/".concat(l)),r(o),c(0),localStorage.setItem("state",JSON.stringify(t)),e("/game")}},{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.id,e.target.value))}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.name;return r.a.createElement("div",{className:"home"},r.a.createElement(S,null),r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"email"},r.a.createElement("input",{type:"text",placeholder:"Email","data-testid":"input-gravatar-email",value:t,id:"email",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"name"},r.a.createElement("input",{type:"text",placeholder:"Name","data-testid":"input-player-name",value:a,id:"name",onChange:this.handleChange})),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"button","data-testid":"btn-play",onClick:this.getToken,disabled:!t||!a},"Play"),r.a.createElement(s.b,{to:"/settings"},r.a.createElement("button",{"data-testid":"btn-settings",type:"button"},"Settings")))))}}]),t}(n.Component),T=Object(o.b)(null,(function(e){return{setAvatar:function(t){return e({type:"SET_AVATAR",payload:t})},setName:function(t){return e(function(e){return{type:"SET_NAME",payload:e}}(t))},setScore:function(t){return e(O(t))}}}))(N),w=a(11),x=a.n(w);function D(){var e,t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,x.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 3:return e=a.sent,a.next=6,x.a.awrap(e.json());case 6:return t=a.sent,a.abrupt("return",t.token);case 10:return a.prev=10,a.t0=a.catch(0),a.abrupt("return",a.t0);case 13:case"end":return a.stop()}}),null,null,[[0,10]])}function I(e,t){var a,n,r;return x.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,x.a.awrap(D());case 3:return a=c.sent,c.next=6,x.a.awrap(fetch("https://opentdb.com/api.php?amount=5&difficulty=".concat(e,"&category=").concat(t,"&token=").concat(a)));case 6:return n=c.sent,c.next=9,x.a.awrap(n.json());case 9:return r=c.sent,localStorage.setItem("token",a),c.abrupt("return",r);case 14:return c.prev=14,c.t0=c.catch(0),c.abrupt("return",c.t0);case 17:case"end":return c.stop()}}),null,null,[[0,14]])}function _(){var e,t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,x.a.awrap(fetch("https://opentdb.com/api_category.php"));case 3:return e=a.sent,a.next=6,x.a.awrap(e.json());case 6:return t=a.sent,a.abrupt("return",t.trivia_categories);case 10:return a.prev=10,a.t0=a.catch(0),a.abrupt("return",a.t0);case 13:case"end":return a.stop()}}),null,null,[[0,10]])}a(212);var R=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading"},r.a.createElement(S,null),r.a.createElement("h1",null,"Loading..."))}}]),t}(n.Component),F=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).state={categories:[],loading:!0},e.setCategories=e.setCategories.bind(Object(b.a)(e)),e.chooseCategory=e.chooseCategory.bind(Object(b.a)(e)),e.changeDifficulty=e.changeDifficulty.bind(Object(b.a)(e)),e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setCategories()}},{key:"setCategories",value:function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(_());case 2:e=t.sent,this.setState({categories:e,loading:!1});case 4:case"end":return t.stop()}}),null,this)}},{key:"changeDifficulty",value:function(e){var t=e.target;(0,this.props.setDifficulty)(t.value)}},{key:"chooseCategory",value:function(e){var t=e.target.value;(0,this.props.setCategory)(t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.categories;return a?r.a.createElement(R,null):r.a.createElement("div",{className:"settings"},r.a.createElement(S,null),r.a.createElement("div",{className:"settings-menu"},r.a.createElement("h1",{"data-testid":"settings-title"},"Settings"),r.a.createElement("div",{className:"settings-select"},r.a.createElement("label",{htmlFor:"difficulty"},"Questions difficulty:",r.a.createElement("select",{id:"difficulty",onChange:this.changeDifficulty},r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"hard"},"Hard"))),r.a.createElement("label",{htmlFor:"categories"},"Categories:",r.a.createElement("select",{name:"categories",id:"categories",onChange:this.chooseCategory},n.map((function(t,a){return r.a.createElement("option",{key:a,onChange:e.chooseCategory,value:t.id},t.name)}))))),r.a.createElement(s.b,{to:"/"},"Home")))}}]),t}(n.Component),A=Object(o.b)(null,(function(e){return{setDifficulty:function(t){return e(function(e){return{type:"SET_DIFFICULTY",payload:e}}(t))},setCategory:function(t){return e(function(e){return{type:"SET_CATEGORY",payload:e}}(t))}}}))(F),q=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.avatar,a=e.name,n=this.props.score;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"player-info"},r.a.createElement("img",{className:"avatar","data-testid":"header-profile-picture",src:t,alt:"Avatar"}),r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"header-player-name"},a),r.a.createElement("p",{className:"score"},n))),r.a.createElement("div",null,r.a.createElement("img",{className:"logo-img",src:C.a,alt:"logo"})))}}]),t}(n.Component),M=Object(o.b)((function(e){return{avatar:e.login.img,name:e.login.name,score:e.game.score}}))(q),H=a(112),J=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).handleClick=e.handleClick.bind(Object(b.a)(e)),e.countScore=e.countScore.bind(Object(b.a)(e)),e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.countDown)()}},{key:"handleClick",value:function(){var e=this.props,t=e.setHidden,a=e.setClicked,n=e.myInterval;a(!0),t(!1),clearInterval(n)}},{key:"countScore",value:function(){var e=this.props,t=e.questions,a=e.timer,n=e.setScore,r=JSON.parse(localStorage.getItem("state")),c=0;"easy"===t.difficulty&&(c=10+a),c="medium"===t.difficulty?10+2*a:10+3*a,r.player.score+=c,n(r.player.score),r.player.assertions+=1,r=localStorage.setItem("state",JSON.stringify(r))}},{key:"render",value:function(){var e=this,t=this.props,a=t.questions,n=a.category,c=a.question,i=a.correct_answer,s=a.incorrect_answers,o=t.disabled,l=t.getClicked,u=t.timer,m=["".concat(i,"-C")].concat(Object(H.a)(s));return m=m.sort(),r.a.createElement("div",{className:"question"},r.a.createElement("p",{"data-testid":"question-category"},n),r.a.createElement("p",{"data-testid":"question-text"},c),m.map((function(t,a){return r.a.createElement("button",{className:t.includes("-C")?l&&"correct-answer":l&&"wrong-answer",key:a,type:"button","data-testid":t.includes("-C")?"correct-answer":"wrong-answer-".concat(a),onClick:t.includes("-C")?function(){e.handleClick(),e.countScore()}:function(){return e.handleClick()},disabled:o},t.includes("-C")?t.slice(0,t.indexOf("-")):t)})),r.a.createElement("p",{className:"timer"},"Time left: ".concat(u,"s")))}}]),t}(n.Component),Q=Object(o.b)((function(e){return{getClicked:e.game.clicked,timer:e.game.timer,score:e.game.score,disabled:e.game.disabled}}),(function(e){return{setHidden:function(t){return e(v(t))},setClicked:function(t){return e(E(t))},setTimer:function(t){return e(k(t))},setScore:function(t){return e(O(t))}}}))(J),B=(a(213),function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).state={questions:[],loading:!0,index:0},e.getQuestions=e.getQuestions.bind(Object(b.a)(e)),e.nextQuestion=e.nextQuestion.bind(Object(b.a)(e)),e.countDown=e.countDown.bind(Object(b.a)(e)),e.refreshTimer=e.refreshTimer.bind(Object(b.a)(e)),e.goToFeedback=e.goToFeedback.bind(Object(b.a)(e)),e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getQuestions(),clearInterval(this.myInterval)}},{key:"getQuestions",value:function(){var e,t,a,n;return x.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.difficulty,a=e.category,r.next=3,x.a.awrap(I(t,a));case 3:n=r.sent,this.setState({questions:n.results,loading:!1});case 5:case"end":return r.stop()}}),null,this)}},{key:"refreshTimer",value:function(){var e=this.props,t=e.setHidden,a=e.timer,n=e.setTimer,r=e.setDisabled;a>0?n(a-1):(clearInterval(this.myInterval),t(!1),r(!0))}},{key:"countDown",value:function(){this.myInterval=setInterval(this.refreshTimer,1e3)}},{key:"nextQuestion",value:function(){var e=this.state.index,t=this.props,a=t.setClicked,n=t.setTimer,r=t.setDisabled,c=t.setHidden;clearInterval(this.myInterval),e<5&&(this.setState({index:e+1}),r(!1),a(!1),n(30),c(!0))}},{key:"goToFeedback",value:function(){var e=this.props,t=e.history.push;(0,e.setClicked)(!1),t("/feedback")}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.index,c=this.props.hiddenBtn;if(a)return r.a.createElement(R,null);var i=this.state.questions;return r.a.createElement("div",{className:"game"},r.a.createElement(M,null),r.a.createElement(Q,{questions:i[n],countDown:this.countDown,myInterval:this.myInterval}),n<4&&r.a.createElement("button",{type:"button","data-testid":"btn-next",className:"button",hidden:c,onClick:function(){e.nextQuestion(),e.countDown()}},"Next"),4===n&&r.a.createElement("button",{type:"button",className:"button",hidden:c,onClick:this.goToFeedback},"Results"))}}]),t}(n.Component)),L=Object(o.b)((function(e){return{hiddenBtn:e.game.hidden,timer:e.game.timer,difficulty:e.game.difficulty,category:e.game.category}}),(function(e){return{setClicked:function(t){return e(E(t))},setTimer:function(t){return e(k(t))},setHidden:function(t){return e(v(t))},setDisabled:function(t){return e({type:"SET_DISABLED",payload:t})}}}))(B),Y=(a(214),function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).state={name:"",score:0,assertions:0},e.getFeedback=e.getFeedback.bind(Object(b.a)(e)),e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getFeedback()}},{key:"getFeedback",value:function(){var e=JSON.parse(localStorage.getItem("state"));this.setState({name:e.player.name,score:e.player.score,assertions:e.player.assertions})}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.score,n=e.assertions,c=this.props.img;return r.a.createElement("div",{className:"feedback"},r.a.createElement(S,null),r.a.createElement("div",{className:"feedback-details"},r.a.createElement("h1",{"data-testid":"feedback-text"},"Results"),r.a.createElement("div",{className:"feedback-info"},r.a.createElement("img",{className:"avatar","data-testid":"header-profile-picture",src:c,alt:"Player avatar"}),r.a.createElement("div",{className:"feedback-score"},r.a.createElement("p",{"data-testid":"header-player-name"},"Player: ".concat(t)),r.a.createElement("p",{"data-testid":"header-score"},"Final score: ".concat(a)),r.a.createElement("p",{"data-testid":"feedback-total-question"},"Questions: ".concat(n)),n<3&&r.a.createElement("p",{"data-testid":"feedback-text"},"Could be better..."),n>=3&&r.a.createElement("p",{"data-testid":"feedback-text"},"Amazing!")))),r.a.createElement("div",{className:"buttons-div"},r.a.createElement(s.b,{to:"/"},r.a.createElement("button",{className:"btn",type:"button","data-testid":"btn-play-again"},"Jogar novamente")),r.a.createElement(s.b,{to:"/ranking"},r.a.createElement("button",{className:"btn",type:"button","data-testid":"btn-ranking"},"Ver Ranking"))))}}]),t}(n.Component)),P=Object(o.b)((function(e){return{img:e.login.img}}))(Y),V=(a(215),function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).state={players:[]},e.getRankings=e.getRankings.bind(Object(b.a)(e)),e.setRankings=e.setRankings.bind(Object(b.a)(e)),e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setRankings()}},{key:"setRankings",value:function(){var e=this.props,t=e.name,a=e.img,n=e.score,r=[];localStorage.ranking&&(r=JSON.parse(localStorage.getItem("ranking")));var c={name:t,score:n,picture:a};""!==t&&r.push(c),localStorage.setItem("ranking",JSON.stringify(r)),this.getRankings()}},{key:"getRankings",value:function(){var e=JSON.parse(localStorage.getItem("ranking"));this.setState({players:e})}},{key:"render",value:function(){var e=this.state.players;return r.a.createElement("div",{className:"ranking"},r.a.createElement(S,null),r.a.createElement("h1",{"data-testid":"ranking-title"}," Ranking "),e.sort((function(e,t){return t.score-e.score})).map((function(e,t){return r.a.createElement("div",{className:"player",key:t},r.a.createElement("img",{src:e.picture,alt:e.name}),r.a.createElement("p",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("p",{"data-testid":"player-score-".concat(t)},e.score))})),r.a.createElement(s.b,{to:"/"},r.a.createElement("button",{className:"home-btn",type:"button","data-testid":"btn-go-home"},"Home")))}}]),t}(n.Component)),W=Object(o.b)((function(e){return{name:e.login.name,img:e.login.img,score:e.game.score}}))(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(27),K=a(110),U=a(111),z=a(21),$={name:"",img:""},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AVATAR":return Object(z.a)({},e,{img:t.payload});case"SET_NAME":return Object(z.a)({},e,{name:t.payload});default:return e}},Z={hidden:!0,disabled:!1,clicked:!1,score:0,timer:30,difficulty:"",category:""},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BTN_HIDDEN":return Object(z.a)({},e,{hidden:t.payload});case"SET_CLICKED":return Object(z.a)({},e,{clicked:t.payload});case"SET_TIMER":return Object(z.a)({},e,{timer:t.payload});case"SET_SCORE":return Object(z.a)({},e,{score:t.payload});case"SET_DISABLED":return Object(z.a)({},e,{disabled:t.payload});case"SET_DIFFICULTY":return Object(z.a)({},e,{difficulty:t.payload});case"SET_CATEGORY":return Object(z.a)({},e,{category:t.payload});default:return e}},te=Object(G.combineReducers)({login:X,game:ee}),ae=Object(G.createStore)(te,Object(K.composeWithDevTools)(Object(G.applyMiddleware)(U.a)));a(216);i.a.render(r.a.createElement(s.a,{basename:"/trivia-game"},r.a.createElement(o.a,{store:ae},r.a.createElement((function(){return r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:T}),r.a.createElement(l.a,{path:"/settings",component:A}),r.a.createElement(l.a,{path:"/game",component:L}),r.a.createElement(l.a,{path:"/feedback",component:P}),r.a.createElement(l.a,{path:"/ranking",component:W}))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},48:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"}},[[113,1,2]]]);
//# sourceMappingURL=main.6e56ef71.chunk.js.map